Test file here


ScanSpec scanSpec = new ScanSpec()
                .withFilterExpression("contains (Note, :v_txt)")
                .withValueMap(new ValueMap().withString(":v_txt", searchText))
                .withProjectionExpression("UserId, NoteId, Note");


Iterator<Item> item = page.iterator();


UpdateItemSpec updateItemSpec = new UpdateItemSpec()
.withPrimaryKey("UserId", userId, "NoteId", noteId)
.withUpdateExpression("set #inc = :val1")
.withNameMap(new NameMap()
.with("#inc", "Is_Incomplete"))
.withValueMap(new ValueMap()
.withString(":val1", "Yes"))
.withReturnValues(ReturnValue.ALL_NEW);


.withConditionExpression("Is_Incomplete = :v_old")

catch (ConditionalCheckFailedException e) {
            System.out.println("\nUPDATE#2 - REPEAT: Printing item after the conditional update for the item - \"" + userId + "\" and \"" + noteId + "\"  - FAILURE:");
            System.out.println("UpdateItem failed on item due to unmatching condition!");
            System.err.println(e.getMessage());
        }

//Allow update to the Notes item only if the note is incomplete - SUCCESS
        updateExistingAttributeConditionally(table, qUserId, qNoteId, newNote);

        //Allow update to the Notes item only if the note is incomplete - FAILURE
        updateExistingAttributeConditionally(table, qUserId, qNoteId, newNote);
lab 4:
bucket-> labstack-7803233e-1fd3-438c-9a-pollynotesapibucket-tkqlk71sikl8

set env-parms=TABLE_NAME=Notes, MP3_BUCKET_NAME=<MP3BucketName>

aws lambda update-function-configuration --function-name dictate-function --environment Variables="{%env-parms%}"

var request = GetItemRequest.builder()
                .tableName(tableName)
                .key(key)
                .build();
pollyclient.synthesizeSpeech(SynthesizeSpeechRequest.builder()
                    .outputFormat("mp3")
                    .text(noteText)
                    .voiceId(voice)
                    .build(), destfile)
                    .join();

var presigner = S3Presigner.builder().build();
            var url = presigner.presignGetObject(GetObjectPresignRequest.builder()
                    .signatureDuration(Duration.ofMinutes(5))
                    .getObjectRequest(GetObjectRequest.builder()
                            .bucket(bucket)
                            .key(key)
                            .build())
                            .build())
                            .url();

            response = url.toString();

cd C:\code\dictateFunction

aws lambda update-function-code --function-name dictate-function --zip-file fileb://target/dictateFunction.jar

aws lambda update-function-configuration --function-name dictate-function --handler dictate.Handler --memory 500 --timeout 60
{
"UserId": "newbie",
"NoteId": "2",
"VoiceId": "Joey"
}


{
"UserId": "newbie",
"NoteId": "2",
"VoiceId": "Joey"
}


cd C:\code\dictateFunction\src\main\resources


aws lambda invoke --function-name dictate-function --payload fileb://event.json response.txt













